#config_version=6

# TATTOO MYSTIQUE

#ball_started{current_player.score > 1000000}:
# device.switches.<name>.state

#ball_started{device.switches.<name>.state == ???}:


# ---------------------
# EVENT::PLAYER
# ---------------------
event_player:
    # ---------------------
    # EVENT::BALL STARTING::LEFT LOOP::GATE
    # ---------------------
    #ball_started:
    mode_modeTattooMystiqueBase_started:
        - eventEnableBallHoldVukLowerRight
        - eventMakeVisibleTigerHeadPurple

    # ---------------------
    # CHECK INITIAL STATE
    # ---------------------
    # TWO BALLS HELD - NOT RIGHT - EJECT AND RESET GAME
    ball_started{device.switches.s_1_29.state == 1 and device.switches.s_1_19.state == 1}:
        # EJECT BALL FROM ONE HOLD
        - eventPulseVukUpperRight2
        # FORCE RESET OF GAME
        - end_game

    # BALLS HELD IN LOWER UPPER RIGHT VUK - ENABLE CLOCKWISE SHOT
    ball_started{device.switches.s_1_29.state == 1 and device.switches.s_1_19.state != 1}:
        # ROLLOVERS
        - eventEnableShotLeftRollover1TattooMystique
        - eventEnableShotLeftRollover2TattooMystique
        # VUKS
        - eventEnableShotVukUpperRight2TattooMystique
        - eventDisableShotVukUpperRight1TattooMystique
        # ENABLE INLINE DROP
        - eventResetDropTargetInline|2000ms
        - eventEnableShotRightInlineDropTattooMystique|3000ms
        # SETUP SHOTS
        # NORMAL MODE
        #- eventSwapModeTattooMystiquePurple2Orange|1000ms
        # SANDBOX MODE
        - eventStartModeTattooMystiqueSandbox
        # ANIMATION :: TIGER HEAD :: ORANGE
        - eventMakeVisibleTigerHeadOrange|1000ms
        - playPoolSoundTiger

    # BALLS HELD IN UPPER RIGHT VUK - ENABLE COUNTER-CLOCKWISE SHOT
    ball_started{device.switches.s_1_29.state != 1 and device.switches.s_1_19.state == 1}:
        # DISABLE ROLLOVER SHOTS
        - eventDisableShotLeftRollover1TattooMystique
        - eventDisableShotLeftRollover2TattooMystique
        # DISABLE INLINE DROP - KEEP IT DOWN
        - eventDisableShotRightInlineDropTattooMystique
        # KNOCKDOWN INLINE DROP - KNOCK IT DOWN
        - eventPulseRightInlineDropKnockdown|1500ms
        # VUKS
        - eventEnableShotVukUpperRight1TattooMystique|2000ms
        - eventDisableShotVukUpperRight2TattooMystique|1500ms
        # SETUP SHOTS
        # NORMAL MODE
        #- eventSwapModeTattooMystiqueOrange2Purple|1000ms
        # SANDBOX MODE
        - eventStartModeTattooMystiqueSandbox
        # ANIMATION :: TIGER HEAD :: PURPLE
        - eventMakeVisibleTigerHeadPurple|1000ms
        - playPoolSoundEagle

    # # NO BALLS HELD - NOT RIGHT - BLOCK BOTH SHOTS - NO ROTATION
    ball_started{device.switches.s_1_29.state != 1 and device.switches.s_1_19.state != 1}:
        # DISABLE ROLLOVER SHOTS
        - eventDisableShotLeftRollover1TattooMystique
        - eventDisableShotLeftRollover2TattooMystique
        # DISABLE VUK SHOTS
        - eventDisableShotVukUpperRight1TattooMystique|2000ms
        - eventDisableShotVukUpperRight2TattooMystique|1500ms
        # ENABLE INLINE DROP - KEEP UP
        - eventResetDropTargetInline|2000ms
        - eventEnableShotRightInlineDropTattooMystique|3000ms
        # DEBUG
        - eventDebugNoBallsInVuks

    # ---------------------
    # ENTERING VUK UPPER RIGHT 1
    # ---------------------
    shotVukUpperRight1TattooMystique_hit:
        # MECHANICS
        - eventSwapShotCounterClockwise
        # SHOTS
        #- eventSwapModeTattooMystiqueOrange2Purple
        - eventSwapModeTattooMystiquePurple2Orange
       # ANIMATION :: TIGER HEAD :: ORANGE
        - eventMakeVisibleTigerHeadOrange
        - playPoolSoundTiger

    # ---------------------
    # ENTERING VUK UPPER RIGHT 2
    # ---------------------
    shotVukUpperRight2TattooMystique_hit:
        # MECHANICS
        - eventSwapShotClockwise
        # SHOTS
        #- eventSwapModeTattooMystiquePurple2Orange
        - eventSwapModeTattooMystiqueOrange2Purple
       # ANIMATION :: TIGER HEAD :: PURPLE
        - eventMakeVisibleTigerHeadPurple
        - playPoolSoundEagle

    # ---------------------
    # SWAP COUNTER CLOCKWISE
    # ---------------------
    eventSwapShotCounterClockwise:
        # PUT SOMETHING HERE TO START TIMER - CHECK EJECT STATUS
        #
        # EJECT VUK
        - eventPulseVukUpperRight2|500ms
        # ENABLE LEFT ROLLOVER SHOTS
        - eventEnableShotLeftRollover1TattooMystique
        - eventEnableShotLeftRollover2TattooMystique
        # ENABLE INLINE DROP SHOT
        - eventEnableShotRightInlineDropTattooMystique
        # RESET INLINE DROP
        - eventPulseRightInlineDropReset|1000ms
        # SWAP VUK SHOTS
        - eventEnableShotVukUpperRight2TattooMystique|1500ms
        - eventDisableShotVukUpperRight1TattooMystique

    # ---------------------
    # SWAP CLOCKWISE
    # ---------------------
    eventSwapShotClockwise:
        # PUT SOMETHING HERE TO START TIMER - CHECK EJECT STATUS
        #
        # DISABLE INLINE DROP SHOT
        - eventDisableShotRightInlineDropTattooMystique
        # KNOCKDOWN INLINE DROP
        - eventPulseRightInlineDropKnockdown|100ms
        # EJECT VUK
        - eventPulseVukUpperRight1|700ms
        # DISABLE LEFT ROLLOVER SHOTS
        - eventDisableShotLeftRollover1TattooMystique
        - eventDisableShotLeftRollover2TattooMystique
        # SWAP VUK SHOTS
        - eventEnableShotVukUpperRight1TattooMystique|2000ms
        - eventDisableShotVukUpperRight2TattooMystique|2000ms

    # ---------------------
    # ENTERING VUK LOWER RIGHT
    # ---------------------
    ball_hold_ballHoldVukLowerRight_held_ball:
        - eventReleaseBallHoldVukLowerRight|2000ms

    # ---------------------
    # EVENT::BALL ENDING
    # ---------------------
    ball_ending:
        # LEFT ROLLOVER
        - eventDisableShotLeftRollover1TattooMystique
        - eventDisableShotLeftRollover2TattooMystique
        # RIGHT INLINE DROP
        - eventDisableShotRightInlineDropTattooMystique
        # DISABLE VUK SHOTS
        - eventDisableShotLeftRollover1TattooMystique
        - eventDisableShotLeftRollover2TattooMystique

    # REMOVE UNTIL SWITCH FIXED
    # sequenceShotLeftRolloverTattooMystique_hit:
    #     - eventEnableTopRightGate
    #     - eventDisableTopRightGate|3s

    # ---------------------
    # FOR TESTING::LEFT LOOP
    # ---------------------
    shotLeftRollover2TattooMystique_hit:
        - eventEnableTopRightGate
        - eventDisableTopRightGate|2s
    # ---------------------
    # AUTO RESET RIGHT INLINE DROP WHEN ENABLED
    # ---------------------
    shotRightInlineDropTattooMystique_hit:
        # RESET INLINE DROP
        - eventPulseRightInlineDropReset
        # PULSE MAGNET UPPER RIGHT
        #- eventPulseMagnetUpperRight

# -----------------------------
# SHOTS
# -----------------------------
shots:
# -------------------
# SHOTS::LEFT LOOP
# -------------------
    shotLeftRollover1TattooMystique:
        switch: s_1_16
        enable_events:
            - eventEnableShotLeftRollover1TattooMystique
        disable_events:
            - eventDisableShotLeftRollover1TattooMystique

    shotLeftRollover2TattooMystique:
        switch: s_1_31
        enable_events:
            - eventEnableShotLeftRollover2TattooMystique
        disable_events:
            - eventDisableShotLeftRollover2TattooMystique
# -------------------
# SHOTS::INLINE DROP
# -------------------
    shotRightInlineDropTattooMystique:
        switch: s_1_28
        enable_events:
            - eventEnableShotRightInlineDropTattooMystique
        disable_events:
            - eventDisableShotRightInlineDropTattooMystique

# -------------------
# SHOTS::VUK UPPER RIGHT 2
# -------------------
    shotVukUpperRight2TattooMystique:
        switch: s_1_19
        enable_events:
            - eventEnableShotVukUpperRight2TattooMystique
        disable_events:
            - eventDisableShotVukUpperRight2TattooMystique
# -------------------
# SHOTS::VUK UPPER RIGHT 1
# -------------------
    shotVukUpperRight1TattooMystique:
        switch: s_1_29
        enable_events:
            - eventEnableShotVukUpperRight1TattooMystique
        disable_events:
            - eventDisableShotVukUpperRight1TattooMystique

# ---------------------
# SEQUENCE::SHOTS
# ---------------------
sequence_shots:
    # -------------------
    # SEQUENCE::SHOTS::ORBIT::GATE
    # -------------------
    sequenceShotLeftRolloverTattooMystique:
        event_sequence:
            - shotLeftRollover1TattooMystique_hit
            - shotLeftRollover2TattooMystique_hit
        sequence_timeout: 2s


# ---------------------
# COIL::PLAYER
# ---------------------
coil_player:
    # ----------------------------
    # MAGNET UPPER RIGHT
    # ----------------------------
    eventPulseMagnetUpperRight:
        c_0_0:
            action: pulse
    # ----------------------------
    # ORBIT LOOP GATE
    # ----------------------------
    eventEnableTopRightGate:
        c_0_12:
            action: enable
    eventDisableTopRightGate:
        c_0_12:
            action: disable
    # ----------------------------
    # RIGHT INLINE DROP
    # ----------------------------
    eventPulseRightInlineDropKnockdown:
        c_0_11:
            action: pulse
    eventPulseRightInlineDropReset:
        c_0_15:
            action: pulse
    # ----------------------------
    # EJECT VUKS
    # ----------------------------
    eventPulseVukUpperRight1:
        c_1_2:
            action: pulse
    eventPulseVukUpperRight2:
        c_1_1:
            action: pulse